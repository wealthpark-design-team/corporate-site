# 認証機能ガイド

## 🔐 コードだけで完結するポータブル認証

**完全ポータブル設計**: コード内に認証設定を記載しているため、環境変数の設定不要でどのホスティング環境でも動作します。

## 認証設定の変更方法

### 方法1: コードで直接変更（推奨）

`lib/auth.ts` を編集：

```typescript
const AUTH_CONFIG = {
  enabled: true,          // 認証の有効/無効
  password: 'wealthpark', // パスワード
}
```

**メリット：**
- ✅ 環境変数の設定不要
- ✅ どのホスティング環境でも同じ動作
- ✅ Git clone → npm run build → デプロイ だけで動作

**変更手順：**
1. `lib/auth.ts` を開く
2. `AUTH_CONFIG` の値を変更
3. コミット & プッシュ
4. 自動デプロイ完了

---

### 方法2: 環境変数で上書き（オプション）

環境ごとに異なるパスワードを使いたい場合のみ使用：

**Vercel:**
- `NEXT_PUBLIC_AUTH_ENABLED` = `true` または `false`
- `NEXT_PUBLIC_AUTH_PASSWORD` = `カスタムパスワード`

**Kinsta:**
- 同じ環境変数を設定

**優先順位：**
1. 環境変数（設定されていれば）
2. コード内の `AUTH_CONFIG`（デフォルト）

---

## 認証の有効化/無効化

### 有効化（デフォルト）

現在の設定で既に有効化されています。

### 無効化する場合

`lib/auth.ts` を編集：

```typescript
const AUTH_CONFIG = {
  enabled: false,  // false に変更
  password: 'wealthpark',
}
```

---

## 動作仕様

### ローカル開発環境
- 認証は自動的にスキップされます
- `npm run dev` で認証なしでアクセス可能

### 本番環境（Vercel、Kinsta等）
- 認証画面が表示されます
- パスワード入力後にサイトが表示されます
- セッションストレージに保存（ブラウザを閉じるとログアウト）

---

## 認証画面のカスタマイズ

`components/AuthWrapper.tsx` を編集：

```typescript
<h1 className="text-2xl font-bold mb-6 text-center text-gray-800">
  WealthPark Preview Site  {/* ← ここを変更 */}
</h1>
```

---

## セキュリティについて

### プレビューサイト向け

このシンプルな認証は、以下の用途に適しています：
- ✅ 開発中のプレビューサイト
- ✅ 社内レビュー用サイト
- ✅ クライアント確認用サイト

### 本番サイトには不向き

以下の場合は、より高度な認証システムを検討してください：
- ❌ ユーザーごとに異なるアクセス権限
- ❌ 個人情報を扱うサイト
- ❌ 決済機能があるサイト

---

## トラブルシューティング

### 認証画面が表示されない

1. `lib/auth.ts` の `enabled: true` を確認
2. ブラウザのキャッシュをクリア
3. シークレットモードで確認

### パスワードが合わない

1. `lib/auth.ts` のパスワードを確認
2. 大文字小文字を確認
3. 環境変数で上書きしていないか確認

### ローカルで認証が表示される

- ローカル開発環境では認証はスキップされます
- これは正常な動作です
- 本番環境でのみ認証が有効になります